# cloud-incident-log-analysis
클라우드 침해 로그 분석

## 1. 프로젝트 개요
본 프로젝트는 AWS CloudTrail 로그를 활용하여 
클라우드 환경에서 발생하는 침해 행위를 사후 분석하는 팀 프로젝트이다.

CloudTrail에 기록되는 관리 이벤트(API Call)를 기반으로  
권한 상승, 계정 악용 등 침해 행위의 로그 증거를 수집·분석한다.

## 2. 프로젝트 목적
본 프로젝트는 AWS CloudTrail 로그를 기반으로 
클라우드 환경에서 발생하는 침해 행위의 흔적을 식별하고 
로그 증거를 체계적으로 정리하는 것을 목표로 한다.

기존 연구가 사후 수집된 로그 분석에 초점을 맞췄다면,  
본 프로젝트는 실제 공격을 재현하여 로그를 직접 생성하고,  
해당 로그가 침해 행위의 증거로 활용 가능한지를 실험적으로 검증한다.

이를 위해 각 공격 시나리오에 대해
- 공격 행위의 흐름을 나타내는 시나리오 구조,
- 단계별 CloudTrail 이벤트 매핑,
- 해당 단계에서 침해를 판단할 수 있는 최소 탐지 조건을 정의하고,
이를 포렌식 분석 관점의 산출물로 정리한다.

## 3. 프로젝트 범위
본 프로젝트는 AWS 환경에서 발생하는 침해 행위를
CloudTrail 관리 이벤트 로그를 기반으로 사후 분석하는 것을 범위로 한다.

- 분석 대상 로그: AWS CloudTrail 관리 이벤트(API Call)
- 분석 관점: 사후 분석(Forensic Analysis)
- 주요 분석 대상:
  - Root 계정 오남용
  - IAM User 생성 및 권한 상승
  - Access Key 발급 및 오용
- 확장 분석 대상:
  - IAM 권한 오남용 이후 발생하는 EBS Snapshot 악용 행위

다음 항목은 본 프로젝트의 범위에서 제외한다.
- 네트워크 패킷 수준의 분석
- 인스턴스 내부 파일 시스템 분석
- 실시간 침해 탐지 및 차단

## 4. 전체 구조
본 프로젝트는 공격 재현을 통해 로그를 생성하고,
해당 로그를 분석하여 침해 행위를 식별하는 흐름으로 구성된다.

전체 구조는 다음과 같다.

1. 공격 시나리오를 기반으로 클라우드 침해 행위를 재현한다.
2. 공격 과정에서 발생한 AWS API 호출은 CloudTrail 로그로 기록된다.
3. CloudTrail 로그는 S3에 수집된다.
4. 수집된 로그는 파싱 및 정규화 과정을 거친다.
5. 정규화된 이벤트에 탐지 룰을 적용한다.
6. 탐지 결과와 로그를 침해 증거로 정리한다.

## 5. 프로젝트 구성 및 역할
### ta3h1. Cloud Security Engineer
- AWS 환경 구성
- CloudTrail 설정
- 로그 수집 파이프라인 구축

### hyehyej. Detection Engineer
- CloudTrail 로그 구조 분석
- 이벤트 정규화
- 탐지 룰 구현

### hhieon. Cloud Attack & System Analyst
- 공격 시나리오 설계
- 침해 흐름 모델링
- 탐지 기준 정의

## 6. 실험 시나리오 개요
본 프로젝트는 CloudTrail 로그로 관측 가능한
클라우드 침해 행위를 중심으로 공격 시나리오를 재현한다.

### 주요 시나리오
- Scenario 1: Root 계정 오남용
- Scenario 2: IAM User 생성 후 권한 상승
- Scenario 3: Access Key 오용을 통한 계정 악용

각 시나리오는 공격 전제 조건, 공격 단계,
기대되는 CloudTrail 이벤트 흐름을 포함한다.

### 확장 시나리오
- Extension Scenario: IAM 권한 오남용 이후 EBS Snapshot 악용

확장 시나리오는 CloudTrail 로그만으로는
스토리지 내부 행위를 직접적으로 입증하기 어려운 자원(EBS)에 대해,
IAM 권한 오남용 이후 발생하는 후속 자원 악용 행위로 정의한다.

## 7. 로그 및 증거물 관리 방식
CloudTrail 로그는 AWS S3에 원본 형태로 저장된다.

본 저장소에는 다음과 같은 자료만 포함한다.
- 실험 시나리오와 직접적으로 관련된 CloudTrail 이벤트 샘플
- 로그 타임라인 요약
- 원본 로그 파일의 해시 값(SHA-256)

계정 ID, 접근 키 등 민감 정보는
공개 저장소 업로드 시 마스킹 처리한다.

## 8. 탐지 로직 개요
본 프로젝트의 탐지는 단일 이벤트가 아닌,
CloudTrail 이벤트의 흐름과 조합을 기반으로 수행된다.

IAM 권한 변경, 계정 생성, 인증 방식 변화와 같은
행위의 연속성을 침해 판단의 기준으로 활용한다.

각 탐지 룰은 특정 공격 시나리오에 대응하도록 설계되며,
탐지 결과는 해당 행위가 발생한 근거 로그와 함께 제공된다.

## 9. 재현 방법
본 프로젝트의 실험은 다음 절차로 재현할 수 있다.

1. AWS 실험 환경 구성
2. CloudTrail 활성화 및 로그 수집 설정
3. 공격 시나리오 실행
4. CloudTrail 로그 수집
5. 로그 파싱 및 탐지 스크립트 실행

## 10. 결과 요약
본 섹션은 공격 재현 및 로그 분석 실험 수행 이후,
각 시나리오에 대한 탐지 결과와 분석 내용을 정리할 예정이다.

## 11. 한계 및 향후 과제
- CloudTrail 로그는 API 호출 수준의 행위만 기록하므로,
  리소스 내부에서 발생하는 행위에 대한 분석에는 한계가 있다.
- 로그 기반 사후 분석 특성상 실시간 침해 탐지는 다루지 않는다.

향후 과제로는 다음을 고려할 수 있다.
- 추가 AWS 보안 서비스와의 연계 분석
- 더 복잡한 침해 시나리오에 대한 확장

## 12. 참고 문헌
Investigating Advanced Persistent Threat Tactics in Cloud Environments: 
A Forensic Study of AWS CloudTrail Log Data